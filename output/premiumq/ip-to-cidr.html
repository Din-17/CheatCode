<html><body><div class="description__24sA"><div class="css-101rr4k"><div class="css-v3d350" data-cy="question-title">751. IP to CIDR</div><div class="css-10o4wqw"><div class="css-14oi08n" diff="easy">Easy</div><button class="btn__r7r7 css-1rdgofi"><svg class="icon__3Su4" height="1em" viewbox="0 0 24 24" width="1em"><path d="M7 19v-8H4v8h3zM7 9c0-.55.22-1.05.58-1.41L14.17 1l1.06 1.05c.27.27.44.65.44 1.06l-.03.32L14.69 8H21c1.1 0 2 .9 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h3zm2 0v10h9l3-7v-2h-9l1.34-5.34L9 9z" fill-rule="evenodd"></path></svg><span>87</span></button><button class="btn__r7r7 css-1rdgofi"><svg class="icon__3Su4" height="1em" viewbox="0 0 24 24" width="1em"><path d="M17 3v12c0 .55-.22 1.05-.58 1.41L9.83 23l-1.06-1.05c-.27-.27-.44-.65-.44-1.06l.03-.32.95-4.57H3c-1.1 0-2-.9-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3h11zm-2 12V5H6l-3 7v2h9l-1.34 5.34L15 15zm2-2h3V5h-3V3h3a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-3v-2z" fill-rule="evenodd"></path></svg><span>692</span></button><button class="btn__r7r7 css-1rdgofi"><svg class="icon__3Su4" height="1em" viewbox="0 0 24 24" width="1em"><path d="M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z" fill-rule="evenodd"></path></svg><span>Add to List</span></button><button class="btn__r7r7 css-1rdgofi"><svg class="icon__3Su4" height="1em" viewbox="0 0 24 24" width="1em"><path d="M17 5V2l5 5h-9a2 2 0 0 0-2 2v8H9V9a4 4 0 0 1 4-4h4zm3 14V9h2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3v2H4v14h16z" fill-rule="evenodd"></path></svg><span>Share</span></button></div></div><div class="content__u3I1 question-content__JfgR"><div><p>
Given a start IP address <code>ip</code> and a number of ips we need to cover <code>n</code>, return a representation of the range as a list (of smallest possible length) of CIDR blocks.
</p><p>
A CIDR block is a string consisting of an IP, followed by a slash, and then the prefix length.  For example: "123.45.67.89/20".  That prefix length "20" represents the number of common prefix bits in the specified range.
</p>
<p><b>Example 1:</b><br/>
</p><pre><b>Input:</b> ip = "255.0.0.7", n = 10
<b>Output:</b> ["255.0.0.7/32","255.0.0.8/29","255.0.0.16/32"]
<b>Explanation:</b>
The initial ip address, when converted to binary, looks like this (spaces added for clarity):
255.0.0.7 -&gt; 11111111 00000000 00000000 00000111
The address "255.0.0.7/32" specifies all addresses with a common prefix of 32 bits to the given address,
ie. just this one address.

The address "255.0.0.8/29" specifies all addresses with a common prefix of 29 bits to the given address:
255.0.0.8 -&gt; 11111111 00000000 00000000 00001000
Addresses with common prefix of 29 bits are:
11111111 00000000 00000000 00001000
11111111 00000000 00000000 00001001
11111111 00000000 00000000 00001010
11111111 00000000 00000000 00001011
11111111 00000000 00000000 00001100
11111111 00000000 00000000 00001101
11111111 00000000 00000000 00001110
11111111 00000000 00000000 00001111

The address "255.0.0.16/32" specifies all addresses with a common prefix of 32 bits to the given address,
ie. just 11111111 00000000 00000000 00010000.

In total, the answer specifies the range of 10 ips starting with the address 255.0.0.7 .

There were other representations, such as:
["255.0.0.7/32","255.0.0.8/30", "255.0.0.12/30", "255.0.0.16/32"],
but our answer was the shortest possible.

Also note that a representation beginning with say, "255.0.0.7/30" would be incorrect,
because it includes addresses like 255.0.0.4 = 11111111 00000000 00000000 00000100 
that are outside the specified range.
</pre>
<p></p>
<p><b>Note:</b><br/>
</p><ol>
<li><code>ip</code> will be a valid IPv4 address.</li>
<li>Every implied address <code>ip + x</code> (for <code>x &lt; n</code>) will be a valid IPv4 address.</li>
<li><code>n</code> will be an integer in the range <code>[1, 1000]</code>.</li>
</ol>
<p></p></div></div><div style="position: relative;"><div class="css-12aggky"><div class="css-oqu510"><div class="css-y3si18">Accepted</div><div class="css-jkjiwi">10,063</div></div><div class="css-oqu510"><div class="css-y3si18">Submissions</div><div class="css-jkjiwi">16,313</div></div></div><div class="erd_scroll_detection_container erd_scroll_detection_container_animation_active" style="visibility: hidden; display: inline; width: 0px; height: 0px; z-index: -1; overflow: hidden; margin: 0px; padding: 0px;"><div class="erd_scroll_detection_container" dir="ltr" style="position: absolute; flex: 0 0 auto; overflow: hidden; z-index: -1; visibility: hidden; width: 100%; height: 100%; left: 0px; top: 0px;"><div class="erd_scroll_detection_container" style="position: absolute; flex: 0 0 auto; overflow: hidden; z-index: -1; visibility: hidden; inset: -1px 0px 0px -1px;"><div style="position: absolute; flex: 0 0 auto; overflow: scroll; z-index: -1; visibility: hidden; width: 100%; height: 100%;"><div style="position: absolute; left: 0px; top: 0px; width: 490px; height: 52px;"></div></div><div style="position: absolute; flex: 0 0 auto; overflow: scroll; z-index: -1; visibility: hidden; width: 100%; height: 100%;"><div style="position: absolute; width: 200%; height: 200%;"></div></div></div></div></div></div><div class="header__28Cb"><div class="title__3BS7" data-size="md">Seen this question in a real interview before?</div><div class="btn-wrapper__19Tg"><button class="btn__1eiM btn-xs__2rgD btn-info__3x1M action-btn__DKeo" data-no-border="false"><div class="btn-content-container__214G"><span class="btn-content__lOBM">Yes</span></div></button></div><div class="btn-wrapper__19Tg"><button class="btn__1eiM btn-xs__2rgD btn-info__3x1M action-btn__DKeo" data-no-border="false"><div class="btn-content-container__214G"><span class="btn-content__lOBM">No</span></div></button></div></div><div class="container__MdHF"><div class="label__kWQk">Contributor</div><div class="contributors__1MZK"><div><a href="/1337c0d3r/" id="0" style="z-index: 1;" target="_blank"><img alt="1337c0d3r" class="avatar__OVN5" src="https://assets.leetcode.com/users/1337c0d3r/avatar_1547177258.png"/></a></div></div></div><div class="css-isal7m"><div class="css-1819af6-baseHeaderStyle e5i1odf0"><div class="css-1jqueqk"><div class="header__2X5E">Companies<svg class="icon__3Su4 info-icon__2U30" height="1em" viewbox="0 0 24 24" width="1em"><path d="M13.91 3.5c.436.031.795.187 1.075.468.28.28.421.63.421 1.052 0 .42-.14.771-.42 1.052-.281.28-.64.42-1.076.42-.437 0-.795-.14-1.076-.42-.28-.28-.42-.631-.42-1.052 0-.421.14-.772.42-1.052.28-.281.64-.437 1.076-.468zm-.374 4.77c.56 0 .85.233.865.7.015.468-.024.874-.117 1.217l-1.17 4.395c-.404 1.465-.576 2.385-.514 2.759.125.25.398.25.819 0 .42-.25.818-.5 1.192-.748l.047-.047c.062 0 .125.03.187.093l.187.328c.031.062 0 .124-.094.187L12.6 18.79c-.405.28-.966.507-1.683.678-.717.172-1.029-.35-.935-1.566.561-2.681 1.036-4.684 1.426-6.009.39-1.325.101-1.675-.865-1.052l-1.075.702c-.094.062-.156.085-.187.07-.032-.016-.078-.102-.14-.257L9 11.122c0-.031.047-.094.14-.187.094-.094.678-.522 1.754-1.286 1.075-.764 1.956-1.224 2.642-1.38z" fill-rule="evenodd"></path></svg></div></div><svg class="icon__3Su4 css-1ehpd12" height="1em" viewbox="0 0 24 24" width="1em"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z" fill-rule="evenodd"></path></svg></div><div class="css-1hky5w4"><span class="time-period-button-group__2HTV"><button class="time-period-button__3neY disabled__3ucc" disabled="">0 ~ 6 months</button><button class="time-period-button__3neY selected__1jx3">6 months ~ 1 year</button><button class="time-period-button__3neY disabled__3ucc" disabled="">1 year ~ 2 years</button></span><div class="company-tag-wrapper__1rBy"><a href="/company/airbnb"><button class="btn__1eiM btn-xs__2rgD tag-btn__3shi company-tag__23z7" data-no-border="false"><div class="btn-content-container__214G"><span class="btn-content__lOBM">Airbnb</span><span class="separator__2KJB">|</span><span>4</span></div></button></a></div></div></div><div class="css-isal7m"><div class="css-1819af6-baseHeaderStyle e5i1odf0"><div class="css-1jqueqk"><div class="header__2RZv">Related Topics</div></div><svg class="icon__3Su4 css-1ehpd12" height="1em" viewbox="0 0 24 24" width="1em"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z" fill-rule="evenodd"></path></svg></div><div class="css-1hky5w4"><a class="topic-tag__1jni" href="/tag/bit-manipulation/"><span class="tag__2PqS" data-size="xs">Bit Manipulation</span></a></div></div><div class="css-isal7m"><div class="css-1819af6-baseHeaderStyle e5i1odf0"><div class="css-1jqueqk"><div class="header__qVrK">Similar Questions</div></div><svg class="icon__3Su4 css-1ehpd12" height="1em" viewbox="0 0 24 24" width="1em"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z" fill-rule="evenodd"></path></svg></div><div class="css-1hky5w4"><div class="question__25Pw"><a class="title__1kvt" href="/problems/restore-ip-addresses/">Restore IP Addresses</a><div class="difficulty__ES5S">Medium</div></div><div class="question__25Pw"><a class="title__1kvt" href="/problems/validate-ip-address/">Validate IP Address</a><div class="difficulty__ES5S">Medium</div></div></div></div><div class="css-isal7m"><div class="css-1819af6-baseHeaderStyle e5i1odf0"><div class="css-1jqueqk"><div class="header__f9p6">Show Hint 1</div></div><svg class="icon__3Su4 css-1ehpd12" height="1em" viewbox="0 0 24 24" width="1em"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z" fill-rule="evenodd"></path></svg></div><div class="css-1hky5w4"><div>Convert the ip addresses to and from (long) integers.  You want to know what is the most addresses you can put in this block starting from the "start" ip, up to n.  It is the smallest between the lowest bit of start and the highest bit of n.  Then, repeat this process with a new start and n.</div></div></div></div></body></html>